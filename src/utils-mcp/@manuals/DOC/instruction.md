# 시스템작업 지시서

## 시스템 개요

> 명확하게 정의하여 작업의 최종 목표와 범위를 설정합니다.

- 웹 기반 시스템의 MCP 자율 최적화 매뉴얼 생성 시스템
  - 본 시스템은 독립 실행형 MCP 시스템으로, 메인 프로세스 스크립트를 통해 사용자가 지정한 처리 폴더의 위치에 관계없이 처리한 결과만 처리 폴더의 상대적인 위치인 하위 폴더에 제공하는 기능을 수행합니다.
  - 시스템 환경 : Nodejs,로컬 `node_modules`를 사용하고 폴더 내에서 중복 생성하지 않는다
  - 모든 코드에는 자세한 주석을 포함합니다.

## 시스템 목적

> 시스템의 최종 목표와 작업 범위를 명확하게 정의합니다. 이 섹션에서는 시스템이 해결하고자 하는 문제, 달성해야 할 결과, 그리고 성공 기준을 상세하게 기술하여 작업의 방향성과 목적을 설정합니다.

- **시스템 요구사항:** `@manuals/DOC/instruction.md`
- 웹 환경에서 동작하는 여러 시스템을 대상으로, MCP(메인 프로세스 스크립트를 통한 자율 최적화) 매뉴얼을 자동으로 생성하는 기능을 수행하는 시스템입니다.

## 시스템 검증

> 스템이 정의된 목적과 요구사항을 충족하는지 검증하기 위한 방법과 기준을 설명합니다. 테스트 계획, 성능 벤치마크, 품질 검증 절차, 그리고 사용자 수용 테스트 등 검증 활동에 대한 세부 사항을 포함합니다.

매뉴얼 생성 시 자동화 테스트 스크립트를 실행하여 정상 동작 여부를 확인할 때 까지 자동 진행 합니다.

- 스크립트가 Directory-Agnostic Execution 정상 동작해야 합니다
- Context-Driven Output이 올바른 경로에 처리해야 합니다.
- CLI 명령어는 절대 경로를 최소화하고 상대 경로 및 동적 변수를 통해 처리하도록 작성되어야 합니다
- 템플릿의 데이타 처리 상태가 적합해야 합니다.
- 일관된 들여쓰기, 불필요한 빈 줄 제거 깔끔한 문서 구조를 적용합니다.
- `bash mkdir -p node_modules/@figma/mcp-server`

## 주요기능

> 시스템이 제공해야 할 핵심 기능들을 목록화하고 설명합니다. 각 기능이 어떤 문제를 해결하며, 시스템 목표 달성에 어떤 역할을 하는지를 명확하게 기술하여 전체 기능 목록과 우선순위를 설정합니다.

### 매뉴얼 템플릿 초기화 (Initialization) 및 데이타 변환 (Data Transformation)

- **매뉴얼 템플릿:** `@manuals/scripts-main/templates/`
- **템플릿 아카이브:** `@manuals/scripts-main/templates/lib`
- **템플릿 백업:** `@manuals/scripts-main/templates/backups`

#### 조건

- Data Initialization : 스키마가 없는 단일 소스 템플릿(Schema-less Single Source Template)을 사용

- Data Transformation :

  - 새로운 템플릿 유형을 생성하지 않고, 기존 템플릿을 변환(Transformation)만 수행
  - 매뉴얼의 제목은 공통으로 사용되는 타이틀로, 매뉴얼 본문은 {} 형태로 요청 데이타로 치환되는 구조
  - Schema-less Flexibility, Loose Coupling to System Logic
  - Single Source of Truth
  - Singleton, Extensible Data Keys로 활용, Robust Default Values, Modular Template Sections

- Data Backups

- Data Standardization : 상기 방식을 통해 템플릿 및 문서 생성 프로세스를 일관되게 유지
-

### 매뉴얼 파일 자동 생성

- **메인 프로세스 폴더:** `@manuals/scripts-main/`
- **처리된 위치** : `요청파일/`의 하위 폴더 `요청폴더/manuals/`
- **처리할 데이터:** `요청폴더/scripts-main/`
- **처리된 결과:** `요청폴더/manuals/main.md`, `요청폴더/manuals/control.md`

#### 조건

- Main Process : Main Orchestrator 로 고정된 위치에서 실행합니다. Single Source of Truth
- Main Command : 절대 경로를 최소화하고 상대 경로 및 동적 변수를 통해 처리하도록 작성되어야 합니다
- Working Directory : Directory-Agnostic Execution, 처리한 결과는 위치는 Context-Driven Output 방식입니다.
- Context-Driven Output : Preset 템플릿으로 일관되게 유지
- Data Backups

### 백업 관리와 로그·매뉴얼 동기화 방안

- `@manuals/scripts-main/templates/backups/`
- `요청폴더/manuals/backups/`

#### 조건

- 템플릿 데이터(백업)를 최대 10개 버전까지 보관
- 필요 시 이전 버전으로 롤백 가능
- 매뉴얼명-YYYYMMDDHHmmss.md 로 구분하여 백업

## 시스템 구상

> 시스템의 고수준 아키텍처와 설계 개념을 설명합니다. 구성요소 간의 상호작용, 데이터 흐름, 인터페이스, 그리고 모듈화된 구조 등을 포함하여 시스템의 전체적인 구성을 시각적으로나 서술적으로 제시합니다.

### 디렉토리 구조

```
├──node_modules/
└── utils-mcp/
   └── @manuals/
      ├── scripts-main/
      │   ├── templates/
      │   │   ├── backups/
      │   │   ├── control.md
      │   │   └── main.md
      │   │
      │   ├── index
      │   ├── {script}
      │   └── {script}
      │
      ├── DOC/
      │   └── instruction.md
      │
      └── manuals/
          ├──backups/
          │
          ├── main.md
          └── control.md

```

### 주요기능 Pipeline(파이프라인) 또는 Workflow(워크플로)

- **템플릿 생성 Pipeline**
  `@manuals/DOC/instruction.md`요구사항 검토 → `@manuals/scripts-main/` 구축 → `@manuals/scripts-main/backups/templates/` 백업 → `@manuals/scripts-main/templates/` 구축

- **매뉴얼 생성 Pipeline**
  `요청폴더/scripts-main/` 시스템 검토 → `@manuals/scripts-main/templates/` 활용 → `요청폴더/manuals/backups` 백업 → `요청폴더/manuals/`에 매뉴얼 생성 → 생성한 매뉴얼과 백업한 매뉴얼 주소 제시

## 구현예시

> 시스템 구현에 대한 구체적인 예시를 제공합니다. 코드 스니펫, 다이어그램, 플로우차트 등을 활용하여 실제 구현 방법을 보여주고, 주요 로직과 알고리즘이 어떻게 작동하는지 설명합니다.

### **main.md 템플릿 예시**

- `main.md`템플릿은 `요청폴더/ `의 시스템을 자세히 설명합니다.
- 템플릿 예시는 실제 데이타나 요구사항에 맞춰 **중괄호 `{}`** 부분을 수정·치환하거나 Partial Override Structure, Extensible Data Keys, Robust Default Values, Modular Template Sections 활용 합니다.

#### 1. 시스템 개요

- 명확하게 정의하여 작업의 최종 목표와 범위를 설정합니다.
  `{{시스템명}}`
  `{{시스템 환경}}`
  > 예:
  > {Figma Setup System}
  > 개발 환경
  >
  > - {Node.js : Chrome V8 엔진 기반의 서버 사이드 자바스크립트 런타임 , 비동기 이벤트 루프 방식으로, 고성능과 확장성을 지향하는 서버/웹 애플리케이션 개발에 널리 사용됨}.
  > - {TypeScript : 컴파일 단계에서 타입 검사로 버그를 사전에 방지하고, 대규모 프로젝트에서 유지보수성을 높임.}
  > - {Handlebars (템플릿 엔진) : 자바스크립트 기반 템플릿 엔진으로, 텍스트(HTML 등)에 데이터 바인딩 가능, 로직과 템플릿을 분리하고, {{}} 구문으로 변수·헬퍼를 쉽게 삽입. 서버 렌더링이나 프론트엔드에서 모두 사용 가능.}
  > - {Winston (로깅) : Node.js 환경에서 로그를 관리하기 위한 유연한 로깅 라이브러리, 로그 레벨 설정, 다양한 출력 방식(파일, 콘솔, 원격 전송 등) 지원, 포맷 커스터마이징, 프로덕션 환경에서 표준적으로 쓰임.}

#### 2. 시스템 목적

- 시스템의 최종 목표와 작업 범위를 명확하게 정의합니다. 이 섹션에서는 시스템이 해결하고자 하는 문제, 달성해야 할 결과, 그리고 성공 기준을 상세하게 기술하여 작업의 방향성과 목적을 설정합니다.
  `{{시스템 목적}}`

> 예:
> Figma 프로젝트 설정 자동화 및 관리 시스템

#### 3. 디렉토리 구조 와 파일 용도

- 요청 폴더의 디렉토리 구조와 파일 용도 설명 (단, `DOC/`, `manuals/`, `backups/` 의 하위 파일은 나열하지 않음)
  `{{요청 폴더의 디렉토리 구조와 파일 용도 설명}}`

> 예:
>
> ```
> ├── {요청폴더/}
> │   ├── scripts-main/
> │   │   ├── templates/
> │   │   │   ├── lib/
> │   │   │   │   ├── changes.hbs
> │   │   │   │   ├── features.hbs
> │   │   │   │   └── pipeline.hbs
> │   │   │   ├── control.md
> │   │   │   ├── main.md
> │   │   │   └── manual.hbs
> │   │   ├── manual-generator.ts    # 매뉴얼 생성 핵심 로직
> │   │   ├── index.ts              # 진입점 및 CLI 처리
> │   │   ├── template-manager.ts    # 템플릿 관리 및 처리
> │   │   ├── types.d.ts            # 타입 정의
> │   │   ├── manualGenerator.ts     # 매뉴얼 생성기 클래스
> │   │   ├── backupManager.ts       # 백업 관리
> │   │   ├── logger.ts             # 로깅 유틸리티
> │   │   ├── types.ts              # 공통 타입 정의
> │   │   ├── package.json          # 프로젝트 설정
> │   │   └── tsconfig.json         # TypeScript 설정
> │   ├── DOC/                      # 문서 디렉토리
> │   └── manuals/                  # 생성된 매뉴얼 저장
> └── backups/                      # 백업 디렉토리
>
>
> - {index.ts} : {애플리케이션의 진입점}
> - {setup-guide-updater.ts} : {설정 가이드 업데이트 관리}
> - {...}
> ```

#### 4. 주요 기능

- 시스템이 제공해야 할 핵심 기능들을 목록화하고 설명합니다. 각 기능이 어떤 문제를 해결하며, 시스템 목표 달성에 어떤 역할을 하는지를 명확하게 기술하여 전체 기능 목록과 우선순위를 설정합니다.
  `{{Pipeline(파이프라인) 또는 Workflow(워크플로)}}`

> 예: 관련 파일이나 코드 위치 포함
>
> - {**템플릿 생성 Pipeline**}
>   {`@manuals/DOC/instruction.md`요구사항 검토 → `@manuals/scripts-main/` 구축 → `@manuals/scripts-main/backups/templates/` 백업 → `@manuals/scripts-main/templates/` 구축}

> - {**매뉴얼 생성 Pipeline**}
>   {`요청폴더/scripts-main/` 시스템 검토 → `@manuals/scripts-main/templates/` 활용 → `요청폴더/manuals/backups` 백업 → `요청폴더/manuals/`에 매뉴얼 생성 → 생성한 매뉴얼과 백업한 매뉴얼 주소 제시}

- 시스템이 제공해야 할 핵심 기능들을 목록화하고 설명합니다. 각 기능이 어떤 문제를 해결하며, 시스템 목표 달성에 어떤 역할을 하는지를 명확하게 기술하여 전체 기능 목록과 우선순위를 설정합니다.
  `{{기능 목록}}`
  > 예: 관련 파일이나 코드 위치 포함
  > {**매뉴얼 템플릿 초기화 (Initialization) 및 데이타 변환 (Data Transformation)**}
  > {...}
  > {**### 매뉴얼 파일 자동 생성**}
  > {...}
  > {**백업 관리와 로그·매뉴얼 동기화 방안**}
  >
  > {- 템플릿 백업 : `@manuals/scripts-main/templates/backups/`
  >
  > - 매뉴얼 백업 : `요청폴더/manuals/backups/`
  > - 조건
  >   - 템플릿 데이터(백업)를 최대 10개 버전까지 보관
  >   - 필요 시 이전 버전으로 롤백 가능
  >   - 매뉴얼명-YYYYMMDDHHmmss.md 로 구분하여 백업}

---

#### 5. 구현 전략

- 시스템 구현을 위한 개발 방법론과 전략을 기술합니다. 선택한 기술 스택, 디자인 패턴, 모듈화 접근법, 그리고 개발 및 배포 프로세스(예: CI/CD 파이프라인 구성) 등이 포함됩니다.
  `{{구현 전략}}`

> 예:
>
> - **시스템의 구조적 측면**
>   {- TypeScript/JavaScript 기반의 견고한 아키텍처
>   - 체계적인 유틸리티 라이브러리 구조
>   - 함수형 프로그래밍 패턴 적용}
> - **기능적 측면**
>   {- 데이터 검색 (find, findIndex)
>   - 데이터 변환 (map, flatMap)
>   - 데이터 필터링 (filter)
>   - 데이터 정렬 및 중복 제거 (deduplicate)}
> - **코드 품질**
>   {- 명확한 네이밍 컨벤션
>   - 단일 책임 원칙 준수
>   - 타입 안정성 보장}
> - **확장성**
>   {- 모듈형 구조로 기능 확장 용이
>   - 다양한 데이터 처리 시나리오 지원}

#### 6. 용어 사전

- 문서 전반에 걸쳐 사용되는 주요 용어, 약어, 정의를 제공합니다. 이를 통해 모든 이해관계자가 동일한 용어 집합을 사용하며, 문서 내용에 대한 명확한 이해를 도모합니다.
  `{{용어 사전}}`

> 예:
>
> - {**MCP**}
> - {"Manual Creation Process" 또는 "Modular Control Process" 등, 프로젝트에서 사용되는 자동 매뉴얼 생성 시스템을 통칭}
> - {**TypeScript**}
> - {JavaScript에 정적 타입을 추가한 언어로, 코드 품질 개선과 유지보수에 도움을 주는 여러 용어와 개념을 포함합니다}
> - {**CI/CD**}
> - {Continuous Integration(지속적 통합), Continuous Deployment(지속적 배포). 코드 변경 시 자동 빌드·테스트·배포를 수행}
> - {**CLI**}
> - {Command Line Interface. 터미널(콘솔)에서 명령어를 통해 시스템을 제어·실행하는 방식을 의미}

---

#### 7. 시스템 CLI

- 시스템의 명령줄 인터페이스(CLI)에 대한 사용법을 기술합니다. 사용 가능한 명령어, 옵션, 인수, 실행 예제 등을 포함하여, 사용자가 시스템을 쉽게 조작할 수 있도록 지원합니다.
  `{{시스템 CLI}}`

> 예:

> {**기본 실행**}
> {현재 폴더의 매뉴얼을 생성합니다:}
> {npx @manuals/scripts-main}
> {**경로 지정 실행**}
> {현재 폴더의 매뉴얼을 생성합니다:}
> {npx ts-node index.ts --path=../manuals --templates=./templates --output=../manuals}

#### 8. 최근 변경사항

- 시스템의 최신 업데이트, 개선사항, 버그 수정 내역 등을 기록합니다. 이 섹션은 시스템의 변화 이력을 추적하며, 사용자와 개발자가 최근 변경 사항을 빠르게 파악할 수 있도록 합니다.
  `{{최근 변경사항}}`

> 예:
>
> - 마지막 변경 : {2024-03-29 10:45:00: 템플릿 구조 개선}
> - {2024-03-29 10:45:00: 초기 시스템 구축}
> - {2024-03-29 10:45:00: 템플릿 구조 개선}
> - {2024-03-29 10:45:00: 백업 관리 기능 추가}
> - {2024-03-29 10:45:00: 템플릿 구조 개선}

### **control.md 템플릿 예시**

이 문서는 `요청폴더/scripts-main/` 내의 전체 시스템 흐름과 각 구성요소의 역할, 위치, 로그 정보, 디버깅 명령어, 에러 처리 및 재시도 로직, 문제 해결 가이드, 이벤트 처리 및 동기화 전략, 그리고 시스템 상태, 모니터링 및 배포/CI/CD 통합 전략을 **상세하게 기술**하기 위한 템플릿 예시입니다.
이를 통해 **문제 발생 시 전체 프로세스와 개별 모듈의 상태를 신속하게 파악**하고, **원인 분석 및 해결**에 도움을 받을 수 있습니다.

---

#### 1. 시스템 명

이를 통해 문제 발생 시 전체 프로세스와 개별 모듈의 상태를 신속하게 파악하고, 원인 분석 및 해결에 도움을 받을 수 있습니다.
`{{시스템명}}`

> 예: MCP 자율 최적화 매뉴얼 생성 시스템 컨트롤 가이드

---

#### 2. 시스템 흐름 및 구성요소 섹션 이름

이 섹션은 `{시스템 이름}`의 **실행 단계**와 **각 단계에 대응하는 핵심 구성요소**의 정보를 통합하여 제공합니다.

##### 2.1 {초기화 및 환경 설정 타이틀}

[DEBUG: {초기화-시작}]

- **실행 단계:**

> - {디렉토리 구조 확인 및 생성 작업 설명} → [DEBUG: {디렉토리 검사-완료 메시지}]
> - {템플릿 파일 초기화 작업 설명} → [DEBUG: {템플릿 초기화-완료 메시지}]
> - {설정 로드 작업 설명} → [DEBUG: {설정 로드-완료 메시지}]

- **관련 구성요소:**
  > - **{스크립트 분석기 명칭}**
  > - **용도:** {구성요소 용도에 대한 설명}
  > - **위치:** `{경로 예: @scripts-main/manual-generator.ts}`
  > - **디버깅 정보:** {로그 파일 경로}; {체크포인트(초기 변수 값, 환경 변수 로드 상태 등)}

[DEBUG: {초기화-완료}]

##### 2.2 {스크립트 분석 타이틀}

[DEBUG: {분석-시작}]

- **실행 단계:**

> - {파일 스캔 설명} → [DEBUG: {파일 스캔-완료 메시지}]
> - {함수, 이벤트, 프로토콜 분석 설명} → [DEBUG: {코드 분석-완료 메시지}]
> - {코드 구조 파악 설명} → [DEBUG: {구조 분석-완료 메시지}]

- **관련 구성요소:**
  > - **{스크립트 분석기 명칭} (계속 활용)**
  > - **디버깅 정보:** {로그 파일 경로}; {체크포인트(함수 개수, 이벤트 카운트, 실행 시간 등)}

[DEBUG: {분석-완료}]

##### 2.3 {매뉴얼 생성 타이틀}

[DEBUG: {매뉴얼 생성-시작}]

- **실행 단계:**

> - {기존 매뉴얼 백업 설명} → [DEBUG: {백업-완료 메시지}]
> - {템플릿 적용 설명} → [DEBUG: {템플릿 적용-완료 메시지}]
> - {분석 결과 반영 설명} → [DEBUG: {결과 반영-완료 메시지}]

- **관련 구성요소:**
  > - **{매뉴얼 생성기 명칭}**
  > - **용도:** {매뉴얼 생성기의 역할 및 기능}
  > - **위치:** `{경로 예: @scripts-main/templates/}`
  > - **디버깅 정보:** {로그 파일 경로}; {체크포인트(템플릿 변수, 출력 경로, 백업 상태 등)}

[DEBUG: {매뉴얼 생성-완료}]

##### 2.4 {최적화 및 모니터링 타이틀}

[DEBUG: {최적화-시작}]

- **실행 단계:**

> - {시스템 상태 체크 설명} → [DEBUG: {상태 체크-완료 메시지}]
> - {자동 복구 루프 실행 설명} → [DEBUG: {복구 루프-완료 메시지}]
> - {성능 모니터링 설명} → [DEBUG: {모니터링-완료 메시지}]

- **관련 구성요소:**
  > - **{최적화 모니터 명칭}**
  > - **용도:** {시스템 상태 감시 및 자동 복구 기능 설명}
  > - **위치:** `{경로 예: @scripts-main/monitor.ts}`
  > - **디버깅 정보:** {로그 파일 경로}; {체크포인트(CPU 사용량, 메모리 상태 등)}
  > - **{Watchdog 프로세스 명칭}**
  > - **용도:** {시스템 안정성 유지, 비정상 상태 감지 기능 설명}
  > - **위치:** `{경로 예: @scripts-main/watchdog.ts}`
  > - **디버깅 정보:** {로그 파일 경로}; {체크포인트(프로세스 상태, 재시작 횟수 등)}

[DEBUG: {최적화-완료}]

---

#### 3. 시나리오별 예제

시스템이 정상 동작하는 시나리오와 오류가 발생하는 시나리오를 **예시 로그**와 함께 기술합니다.

##### 3.1 정상 시나리오

1. **파일 스캔**

> - `@manuals/scripts-main/`에서 템플릿 정보를 로드하고, `요청폴더/scripts-main/` 내 파일 구조를 스캔
> - 로그 예시:
>   ```
>   [DEBUG: 스캔-시작] Analyzing directory: ./scripts-main
>   [DEBUG: 스캔-완료] Found 15 script files.
>   ```

2. **매뉴얼 생성**

> - 스캔 결과를 토대로 템플릿(`@manuals/scripts-main/templates/`)을 적용, `main.md`와 `control.md` 작성
> - 로그 예시:
>   ```
>   [DEBUG: 템플릿 적용-시작] templatePath=@manuals/scripts-main/templates/
>   [DEBUG: 매뉴얼 생성-완료] Output: ./manuals/main.md, ./manuals/control.md
>   ```

3. **백업 및 최적화**
   > - 기존 매뉴얼이 있으면 `./manuals/backups/`로 백업
   > - 복구 루프나 Watchdog 프로세스 필요 사항 점검
   > - 로그 예시:
   >   ```
   >   [DEBUG: 백업-완료] main-YYYYMMDDHHmmss.md
   >   [DEBUG: 모니터링-완료] System stable, CPU=20%, ERR=0%
   >   ```

##### 3.2 오류 시나리오

1. **설정 로드 실패**

> - 설정 파일(`config.json`)이 누락됐거나 파싱 불가한 경우
> - 로그 예시:
>   ```
>   [ERROR][2025-04-02 10:31:00] Configuration file not found: ./config.json
>   [DEBUG: 복구 메커니즘-시작] Attempting to restore from backup...
>   [DEBUG: 복구 메커니즘-완료] Restored config.json successfully
>   ```

2. **템플릿 파일 누락**

> - `@manuals/scripts-main/templates/` 내 필수 템플릿이 없는 경우
> - 로그 예시:
>   ```
>   [ERROR][2025-04-02 10:35:12] Missing template: main_template.md
>   [DEBUG: 재시도-시작] Retrying after 5s...
>   [DEBUG: 재시도-완료] Template found on second attempt
>   ```

3. **디렉토리 접근 권한 문제**
   > - `요청폴더/scripts-main/` 또는 `manuals/` 쓰기 권한이 없을 때
   > - 로그 예시:
   >   ```
   >   [ERROR][2025-04-02 10:37:45] EACCES: permission denied, open './manuals/main.md'
   >   ```

---

#### 4. {디버깅, 로그 정보 및 문제 해결 섹션 타이틀}

이 섹션은 `{시스템 이름}`의 **로그 정보**, **이벤트 처리**, **동기화 전략**, **에러 처리**, **재시도 로직** 및 **문제 해결 가이드**를 통합하여 상세하게 기술합니다.

##### 4.1 {로그 정보 및 형식 섹션}

- **시스템 로그**

> - 파일: `{./logs/system.log}`
> - 레벨: {INFO, DEBUG, ERROR}
> - 포맷: `{[시간][레벨][모듈] 메시지}`

- **분석 로그**

> - 파일: `{./logs/analysis.log}`
> - 레벨: {DEBUG}
> - 포맷: `{[DEBUG: 단계-상태] 상세정보}`

- **에러 로그**

> - 파일: `{./logs/error.log}`
> - 레벨: {ERROR}
> - 포맷: `{[ERROR][시간] 에러메시지 (스택트레이스)}`

- **성능 로그**
  > - 파일: `{./logs/performance.log}`
  > - 레벨: {INFO}
  > - 포맷: `{[시간] 메트릭=값 (CPU, 메모리, 시간)}`

##### 4.2 {이벤트 시스템 및 동기화 전략 섹션}

- **이벤트 처리**

> - 이벤트 등록 → `[DEBUG: {등록-완료}]`
> - 이벤트 발생 → `[DEBUG: {발생-완료}]`
> - 이벤트 처리 → `[DEBUG: {처리-완료}]`

- **이벤트 큐 관리**

> - 큐 상태: {QUEUE_SIZE}, {QUEUE_CAPACITY}
> - 처리 상태: {PROCESSING_COUNT}, {WAITING_COUNT}
> - 성능 지표: {LATENCY}, {THROUGHPUT}

- **이벤트 로깅**

> - 로그 파일: `{./logs/events.log}`
> - 레벨: {DEBUG, INFO, ERROR}
> - 포맷: `{[시간][이벤트][상태] 메시지}`

- **자동 복구 이벤트**

> - 복구 트리거: `{ERROR_COUNT} > {THRESHOLD}`
> - 복구 상태: {RECOVERY_STATUS}
> - 복구 결과: {SUCCESS_RATE}

- **비동기 작업 처리**

> - {Promise 실행, 큐 관리, 동시성 제어 설명}
> - 로그: `[DEBUG: {비동기-시작}]` … `[DEBUG: {비동기-완료}]`

- **동기화 메커니즘**

> - {파일 락, 세마포어, 뮤텍스 등}
> - 로그: `[DEBUG: {동기화-시작}]` … `[DEBUG: {동기화-완료}]`

- **데이터 정합성**
  > - {트랜잭션 관리, 롤백, 백업 설명}
  > - 로그: `[DEBUG: {정합성-시작}]` … `[DEBUG: {정합성-완료}]`

##### 4.3 {에러 처리, 재시도 로직 및 문제 해결 가이드 섹션}

1. **에러 처리 및 자동 복구 메커니즘**

> - **기능**: {오류 감지, 복구 전략 수립, 복구 시도 및 결과 확인 내용}
> - **로그 기록**: `[DEBUG: {복구 메커니즘-시작}]` … `[DEBUG: {복구 메커니즘-완료}]`
> - **참고**: {오류 발생 시 변수 값, 실행 시간, 네트워크 상태 등의 정보 확인 방법}

2. **재시도 로직**

> - **기능**: {지수 백오프, 최대 재시도 횟수 설정, 타임아웃 처리 등}
> - **로그 기록**: `[DEBUG: {재시도-시작}]` … `[DEBUG: {재시도-완료}]`
> - **참고**: {재시도 횟수, 백오프 시간, 타임아웃 설정 등 정보 기록 방법}

3. **문제 해결 가이드**
   [DEBUG: {문제해결 가이드-시작}]
   > - **로그 확인 절차:**
   >   - **system.log**: {전체 시스템 상태 (STATUS, UPTIME, MEMORY) 등}
   >   - **analysis.log**: {스크립트 분석 결과 (SCRIPT_COUNT, FUNC_COUNT, EVENT_COUNT) 등}
   >   - **error.log**: {오류 및 예외 (ERROR_TYPE, ERROR_COUNT, STACK_TRACE) 등}
   >   - **performance.log**: {성능 지표 (CPU_USAGE, MEM_USAGE, LATENCY) 등}
   > - **문제 해결 단계:**
   >   - {로그 레벨 상향 방법 예: `LOG_LEVEL=debug`}
   >   - {디버그 모드 활성화 예: `DEBUG=true`}
   >   - {자동 복구 루프 및 시스템 리소스 상태 확인 방법}
   > - **자동 복구 실패 시:**
   >   - {수동 복구 방법 예: `./recovery.sh --force`}
   >   - {백업 복원 방법 예: `./restore.sh --latest`}
   >   - {시스템 재초기화 방법 예: `./init.sh --clean`}
   >     [DEBUG: {문제해결 가이드-완료}]

---

#### 5. {디버깅 명령어 및 문제 해결 가이드 섹션}

본 섹션에서는 `{시스템 이름}`을 **디버깅**하기 위해 사용되는 명령어와, 에러 처리·재시도 로직 등을 **다시 한 번 정리**합니다.

> ```bash
> # 디버그 모드 실행
> {DEBUG=true node manual-generator.js}
> # 상세 로깅 실행
> {LOG_LEVEL=debug node manual-generator.js}
> # 성능 분석 실행
> {PROFILE=true node manual-generator.js}
> # 자동 복구 비활성화
> {NO_RECOVERY=true node manual-generator.js}
> ```

> ```
>
> ```

> **Tip:** 종료 코드(Exit Code) 정책을 정해두면 CI/CD 환경에서 스크립트 성공/실패 감지가 수월해집니다.
> 예: **0** = 정상 종료, **1** = 설정 로드 실패, **2** = 템플릿 누락 오류, **3** = 권한 오류 등

---

#### 6. {시스템 상태, 모니터링 및 배포/CI/CD 통합 섹션}

이 섹션은 **{시스템 이름}**의 현재 상태와 모니터링 정보, 그리고 배포 및 CI/CD 통합 전략을 **통합**하여 제공합니다.
이를 통해 전체 시스템의 **성능**, **안정성** 및 **최적화 진행 상황**을 한눈에 파악하고, **자동화된 배포 전략**을 통해 시스템 업데이트 및 운영을 효과적으로 관리할 수 있습니다.

> - **런타임 상태**: {정상 작동/에러 여부 등}
> - **메모리 사용량**: {메모리 MB}
> - **CPU 사용량**: {CPU 사용률 %}
> - **네트워크 상태**: {안정 여부 등}
> - **에러율**: {에러율 %}
> - **복구 시도**: {복구 시도 횟수}

> - **최적화 전략**
>   {자동 최적화 진행 중, 혹은 특정 기준 충족 여부 등}
>   **개선**: {처리 시간, 에러율, 자동화 성공률 등의 평가 지표를 기준으로 상태 판단}

> - **분석 도구**
>   {분석 도구 예: TypeScript Analyzer}

> - **최근 프로세스**
>   {매뉴얼 생성, 빌드 작업 등}

> - **디버그 업데이트**
>   {디버그 정보 최신화 완료 여부 등}

##### 배포 및 CI/CD 통합

> - **배포 전략**:

> - {CI/CD 파이프라인 통합 및 자동화된 배포 명령어 사용 예시}
> - 예: `{npx @manuals/scripts-manuals --path $GITHUB_WORKSPACE}` (GitHub Actions), Jenkins, GitLab CI 등

- **CI/CD 통합**:
  > - {코드 변경 시 자동 빌드, 테스트, 배포를 수행하는 파이프라인 구성}
  > - {배포 후 로그 및 모니터링 데이터를 통해 안정성 확인}

---

#### 7. {부가 정보 및 최근 변경사항 섹션}

> - **분석 도구**: {예: TypeScript Analyzer}
> - **최근 프로세스**: {예: 매뉴얼 생성, 빌드 작업 등}
> - **디버그 업데이트**: {예: 디버그 정보 최신화 여부 등}

##### 최근 변경사항

> - {배포 방식 개선}
> - {백업 폴더 구조 정리}
> - 혹은 `{{changes}}` 와 같은 템플릿 변수를 통해 변경사항을 **동적으로 삽입**
> - 변경 날짜 시간

````

```

```

```

```
````
